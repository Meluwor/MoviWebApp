{% extends "base.html" %}
{% block content %}
<a href="{{ url_for('index') }}" class="back-link">‚Üê Back to Users</a>
<h1>Movies of {{user.name}}</h1>
<div>
    <ul class="movie_list">
        {% for link in movies %}
        <li class="movies">
            {% if link.movie.poster_url and link.movie.poster_url != 'N/A' %}
            <img class="movie_poster" src="{{ link.movie.poster_url }}" alt="Poster for {{ link.custom_movie_name }}">
            {% else %}
            <div class="movie_poster_placeholder">üé¨ No Image</div>
            {% endif %}


            <form action="{{ url_for('change_movie_name',user_id=user.id, movie_id=link.movie.id)}}" method="POST">
                <input type="text" name="title" value="{{ link.custom_movie_name}}" required=""><br>
                <button type="submit" class="crud_btn">Update</button>
                <br>

                <strong>Year:</strong>{{ link.movie.year }}<br>
                <strong>Director:</strong>{{ link.movie.director }}<br>
            </form>
            <form action="{{ url_for('delete_movie',user_id=user.id, movie_id=link.movie.id)}}" method="POST">
                <button type="submit" class="crud_btn"
                        onclick="return confirm(&#39;Delete this movie?&#39;);">Delete
                </button>
            </form>
        </li>

        {% else %}
        <li>You have no movies</li>
        {% endfor %}
    </ul>
</div>
<div class="">
    <h2>Add Movie</h2>
    <form action="{{ url_for('add_movie', user_id=user.id) }}" method="POST">
        <input type="text" name="title" placeholder="Movie title" required="">
        <input type="text" name="year" placeholder="Year (optional)">
        <button type="submit" class="crud_btn">Add Movie</button>
    </form>
</div>

{% endblock %}
